import{Aa as V,Ca as O,D as u,Da as j,Ea as q,F as p,Fa as H,Fb as D,G as n,H as c,Hb as W,I as b,J as F,Ja as Q,K as w,M as C,N,P,Q as E,R as S,S as m,T as k,Ta as R,Va as B,aa as _,ba as I,fb as L,n as l,q as y,r as d,ta as g,ua as G,va as v,wa as A,xa as M,y as a,z as f,za as T}from"./chunk-VQKOQMAP.js";var J=["provinces"];function K(t,e){if(t&1&&(n(0,"li"),m(1),c()),t&2){let s=e.$implicit;a(),k(s)}}function U(t,e){if(t&1&&(n(0,"div",15),u(1,K,2,1,"li",14),c()),t&2){let s=N();a(),p("ngForOf",s.errors)}}function X(t,e){if(t&1&&(F(0),n(1,"div",16),b(2,"input",17)(3,"input",18)(4,"input",19,0),c(),w()),t&2){let s=e.index;a(),p("formGroupName",s)}}var h=(()=>{let e=class e{get provincesFormArr(){return this.provincesFormGroup.get("provinces")}constructor(r,i,o){this.fb=r,this.deliveryHttp=i,this.snackbar=o,this.errors=[],this.provincesFormGroup=this.fb.group({provinces:this.fb.array([])})}ngAfterViewInit(){setTimeout(()=>{this.provinces.toArray().at(0)?.nativeElement.focus()},200)}ngOnInit(){this.deliveryHttp.getProvincesPrices().subscribe({next:r=>{R.forEach(i=>{this.provincesFormArr.push(this.fb.group({code:[{value:i.code,disabled:!0},[v.required]],name:[{value:i.name,disabled:!0},[v.required]],price:[r.find(o=>o.code==i.code)?.price??0,[v.required]]}))})}})}save(){this.deliveryHttp.updateProvincePrice(this.provincesFormGroup.getRawValue()).subscribe({next:r=>{r.success?this.snackbar.open("Modification r\xE9ussie!","\u2705",{duration:6e3}):this.snackbar.open("L'op\xE9ration a \xE9chou\xE9!","\u274C",{duration:6e3})}})}};e.\u0275fac=function(i){return new(i||e)(f(Q),f(D),f(L))},e.\u0275cmp=y({type:e,selectors:[["app-provinces-pricing-form"]],viewQuery:function(i,o){if(i&1&&P(J,5),i&2){let x;E(x=S())&&(o.provinces=x)}},decls:20,vars:3,consts:[["provinces",""],[1,"flex","flex-col","flex-1"],[1,"flex","flex-row","items-center","p-5","gap-x-4"],[1,"text-black","font-medium","text-xl"],["mat-flat-button","","color","primary",3,"click"],["class","flex flex-col gap-y-1 bg-red-100 my-4 mx-5 px-4 py-3 w-fit rounded-sm text-red-600",4,"ngIf"],[1,"flex","flex-col","p-5"],[3,"formGroup"],[1,"flex","flex-col","gap-y-2"],[1,"flex","flex-col","bg-white","border","w-fit","max-h-[calc(100vh-190px)]","overflow-y-hidden"],[1,"flex","flex-row","items-center","bg-gray-50","!border-b"],[1,"py-3","px-4","text-left","font-medium","text-black","!w-32","tracking-wider"],[1,"py-3","px-4","text-left","font-medium","text-black","!w-56","tracking-wider"],["formArrayName","provinces",1,"bg-white","overflow-y-auto"],[4,"ngFor","ngForOf"],[1,"flex","flex-col","gap-y-1","bg-red-100","my-4","mx-5","px-4","py-3","w-fit","rounded-sm","text-red-600"],[1,"!p-0","!h-12","!max-w-fit",3,"formGroupName"],["type","text","formControlName","code",1,"!h-12","!border","!px-4","!w-32","!text-sm","!text-black","!rounded-none"],["type","text","formControlName","name",1,"!h-12","!border","!px-4","!w-56","!text-sm","!text-black","!rounded-none"],["type","number","formControlName","price",1,"!h-12","!border","!px-4","!w-56","!text-base","!font-medium","!text-primary","!rounded-none","focus:!outline-none","focus:!border-primary","focus:!border-2"]],template:function(i,o){i&1&&(n(0,"div",1)(1,"div",2)(2,"div",3),m(3,"Livraison et Tarification"),c(),n(4,"button",4),C("click",function(){return o.save()}),m(5,"Enregistrer"),c()(),u(6,U,2,1,"div",5),n(7,"div",6)(8,"form",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11),m(13,"Code"),c(),n(14,"div",12),m(15,"Wilaya"),c(),n(16,"div",12),m(17,"Prix"),c()(),n(18,"div",13),u(19,X,6,1,"ng-container",14),c()()()()()()),i&2&&(a(6),p("ngIf",o.errors.length>0),a(2),p("formGroup",o.provincesFormGroup),a(11),p("ngForOf",o.provincesFormArr.controls))},dependencies:[_,I,T,G,V,A,M,O,H,j,q,B],styles:[`app-provinces-pricing-form{display:flex;flex:1}
`],encapsulation:2});let t=e;return t})();var Y=[{path:"",redirectTo:"provinces-pricing",pathMatch:"full"},{path:"provinces-pricing",component:h}],z=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=d({type:e}),e.\u0275inj=l({imports:[g.forChild(Y),g]});let t=e;return t})();var ve=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=d({type:e}),e.\u0275inj=l({imports:[W,z]});let t=e;return t})();export{ve as DeliveryModule};
