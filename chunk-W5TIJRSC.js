import{Ca as E,D as x,Da as f,Ea as I,F as p,Fa as G,G as o,H as n,Ha as M,I as y,J as P,K as F,Ka as _,La as j,M as w,Ma as D,N as C,Na as T,Pb as q,Ra as A,Rb as L,S as a,T as N,_a as H,ca as S,cb as O,da as k,n as u,ob as V,q as b,r as v,xa as g,y as m,z as d}from"./chunk-4H4KE4SV.js";function W(t,e){if(t&1&&(o(0,"li"),a(1),n()),t&2){let l=e.$implicit;m(),N(l)}}function $(t,e){if(t&1&&(o(0,"div",14),x(1,W,2,1,"li",13),n()),t&2){let l=C();m(),p("ngForOf",l.errors)}}function z(t,e){if(t&1&&(P(0),o(1,"div",15),y(2,"input",16)(3,"input",17)(4,"input",18)(5,"input",19),n(),F()),t&2){let l=e.index;m(),p("formGroupName",l)}}var h=(()=>{let e=class e{get provincesFormArr(){return this.provincesFormGroup.get("provinces")}constructor(c,i,r,s){this.fb=c,this.deliveryHttp=i,this.snackbar=r,this.commonHttp=s,this.errors=[],this.algeriaProvinces=[],this.provincesFormGroup=this.fb.group({provinces:this.fb.array([])})}ngAfterViewInit(){}ngOnInit(){this.commonHttp.allProvinces().subscribe({next:c=>{this.algeriaProvinces=c,this.deliveryHttp.getProvincesPrices().subscribe({next:i=>{this.algeriaProvinces.forEach(r=>{this.provincesFormArr.push(this.fb.group({code:[{value:r.code,disabled:!0},[f.required]],name:[{value:r.name,disabled:!0},[f.required]],officeDeliveryPrice:[i.find(s=>s.code==r.code)?.officeDeliveryPrice??0,[f.required]],homeDeliveryPrice:[i.find(s=>s.code==r.code)?.homeDeliveryPrice??0,[f.required]]}))})}})}})}save(){this.deliveryHttp.updateProvincePrice(this.provincesFormGroup.getRawValue()).subscribe({next:c=>{c.success?this.snackbar.open("Modification r\xE9ussie!","\u2705",{duration:6e3}):this.snackbar.open("L'op\xE9ration a \xE9chou\xE9!","\u274C",{duration:6e3})}})}};e.\u0275fac=function(i){return new(i||e)(d(A),d(q),d(V),d(H))},e.\u0275cmp=b({type:e,selectors:[["app-provinces-pricing-form"]],decls:22,vars:3,consts:[[1,"flex","flex-col","flex-1"],[1,"flex","flex-row","items-center","p-5","gap-x-4"],[1,"text-black","font-medium","text-xl"],["mat-flat-button","","color","primary",3,"click"],["class","flex flex-col gap-y-1 bg-red-100 my-4 mx-5 px-4 py-3 w-fit rounded-sm text-red-600",4,"ngIf"],[1,"flex","flex-col","p-5"],[3,"formGroup"],[1,"flex","flex-col","gap-y-2"],[1,"flex","flex-col","bg-white","border","w-fit","max-h-[calc(100vh-190px)]","overflow-y-hidden"],[1,"flex","flex-row","items-center","bg-gray-50","!border-b"],[1,"py-3","px-4","text-left","font-medium","text-black","!w-32","tracking-wider"],[1,"py-3","px-4","text-left","font-medium","text-black","!w-56","tracking-wider"],["formArrayName","provinces",1,"bg-white","overflow-y-auto"],[4,"ngFor","ngForOf"],[1,"flex","flex-col","gap-y-1","bg-red-100","my-4","mx-5","px-4","py-3","w-fit","rounded-sm","text-red-600"],[1,"!p-0","!h-12","!max-w-fit",3,"formGroupName"],["type","text","formControlName","code",1,"!h-12","!border","!px-4","!w-32","!text-sm","!text-black","!rounded-none"],["type","text","formControlName","name",1,"!h-12","!border","!px-4","!w-56","!text-sm","!text-black","!rounded-none"],["type","text","formControlName","officeDeliveryPrice",1,"!h-12","!border","!px-4","!w-56","!text-base","!font-medium","!text-black","!rounded-none","focus:!outline-none","focus:!border-primary","focus:!border-2"],["type","text","formControlName","homeDeliveryPrice",1,"!h-12","!border","!px-4","!w-56","!text-base","!font-medium","!text-black","!rounded-none","focus:!outline-none","focus:!border-primary","focus:!border-2"]],template:function(i,r){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2),a(3,"Livraison et Tarification"),n(),o(4,"button",3),w("click",function(){return r.save()}),a(5,"Enregistrer"),n()(),x(6,$,2,1,"div",4),o(7,"div",5)(8,"form",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10),a(13,"Code"),n(),o(14,"div",11),a(15,"Wilaya"),n(),o(16,"div",11),a(17,"Prix de Livraison au bureau"),n(),o(18,"div",11),a(19,"Prix de Livraison \xE0 domicile"),n()(),o(20,"div",12),x(21,z,6,1,"ng-container",13),n()()()()()()),i&2&&(m(6),p("ngIf",r.errors.length>0),m(2),p("formGroup",r.provincesFormGroup),m(13),p("ngForOf",r.provincesFormArr.controls))},dependencies:[S,k,M,E,I,G,_,T,j,D,O],styles:[`app-provinces-pricing-form{display:flex;flex:1}
`],encapsulation:2});let t=e;return t})();var J=[{path:"",redirectTo:"provinces-pricing",pathMatch:"full"},{path:"provinces-pricing",component:h}],R=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=v({type:e}),e.\u0275inj=u({imports:[g.forChild(J),g]});let t=e;return t})();var pe=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=v({type:e}),e.\u0275inj=u({imports:[L,R]});let t=e;return t})();export{pe as DeliveryModule};
