import{d as l,i as m,m as i,o as n,ta as u,za as h}from"./chunk-4H4KE4SV.js";var c=class extends Error{};c.prototype.name="InvalidTokenError";function I(r){return decodeURIComponent(atob(r).replace(/(.)/g,(t,a)=>{let e=a.charCodeAt(0).toString(16).toUpperCase();return e.length<2&&(e="0"+e),"%"+e}))}function k(r){let t=r.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return I(t)}catch{return atob(t)}}function d(r,t){if(typeof r!="string")throw new c("Invalid token specified: must be a string");t||(t={});let a=t.header===!0?0:1,e=r.split(".")[a];if(typeof e!="string")throw new c(`Invalid token specified: missing part #${a+1}`);let o;try{o=k(e)}catch(f){throw new c(`Invalid token specified: invalid base64 for part #${a+1} (${f.message})`)}try{return JSON.parse(o)}catch(f){throw new c(`Invalid token specified: invalid json for part #${a+1} (${f.message})`)}}var p=(()=>{let t=class t{constructor(){}getAuthToken(){return localStorage.getItem("auth_token")}getDecodedAuthToken(){let e=localStorage.getItem("auth_token");return e?d(e):null}setAuthToken(e){localStorage.setItem("auth_token",e)}removeAuthToken(){localStorage.removeItem("auth_token"),localStorage.removeItem("user")}currentUsername(){return JSON.parse(localStorage.getItem("user")??"")?.name}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=i({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();var F=(()=>{let t=class t{constructor(e){this.localStorage=e}intercept(e,o){let f=this.localStorage.getAuthToken();return f&&(e=e.clone({setHeaders:{Authorization:`Bearer ${f}`}})),o.handle(e)}};t.\u0275fac=function(o){return new(o||t)(n(p))},t.\u0275prov=i({token:t,factory:t.\u0275fac});let r=t;return r})();var U=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=i({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();var b=(()=>{let t=class t{constructor(e,o){this.localStorage=e,this.router=o}isUserAuthenticated(){return!!this.localStorage.getAuthToken()}logout(){this.localStorage.removeAuthToken(),this.router.navigate(["/auth/login"])}};t.\u0275fac=function(o){return new(o||t)(n(p),n(u))},t.\u0275prov=i({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();var j=(()=>{let t=class t{constructor(){this.spinnerSubject=new l(!1),this.spinnerState=this.spinnerSubject.asObservable()}show(){this.spinnerSubject.next(!0)}hide(){this.spinnerSubject.next(!1)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=i({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();var v=[{code:"ar",text:"\u0639\u0631\u0628\u064A",dir:"rtl"},{code:"fr",text:"Fran\xE7ais",dir:"ltr"}],L=(()=>{let t=class t{constructor(e){this.translate=e,this.langSubject=new l(v[0]),this.lang$=this.langSubject.asObservable()}setLang(e){this.langSubject.next(e),document.documentElement.dir=v.find(o=>o.code==e)?.dir??"ltr",this.translate.setDefaultLang(e)}};t.\u0275fac=function(o){return new(o||t)(n(h))},t.\u0275prov=i({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();var M=(()=>{let t=class t{constructor(e){this.spinnerService=e}intercept(e,o){return this.spinnerService.show(),o.handle(e).pipe(m(()=>{this.spinnerService.hide()}))}};t.\u0275fac=function(o){return new(o||t)(n(j))},t.\u0275prov=i({token:t,factory:t.\u0275fac});let r=t;return r})();var X=(()=>{let t=class t{constructor(e,o){this.auth=e,this.router=o}canActivate(){return this.auth.isUserAuthenticated()?!0:(this.router.navigate(["/auth/login"]),!1)}};t.\u0275fac=function(o){return new(o||t)(n(b),n(u))},t.\u0275prov=i({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();export{p as a,U as b,b as c,j as d,L as e,F as f,M as g,X as h};
